{"tags":[{"name":"CSS","permalink":"http://lingyu.wang/tags/CSS/","url":"/async/tags/CSS.json","count":35}],"categories":[{"name":"CSS","permalink":"http://lingyu.wang/categories/CSS/","url":"/async/categories/CSS.json","count":8}],"url":"/async/posts/2014/02/26/BFC.json","date":1393344000000,"path":{"year":2014,"month":2,"day":26,"name":"BFC"},"subtitle":"什么是BFC？它如何出现、又干了些什么？","title":"深入浅出BFC（Block formatting contexts）","permalink":"http://lingyu.wang/2014/02/26/BFC/","content":"<p>BFC（Block formatting contexts）,是W3C CSS 2.1中的一个概念，决定了元素如何对其内容进行定位，以及与其他元素的关系和相互作用。在创建了BFC的元素中，子元素会一个接一个的被放置…</p>\n<a id=\"more\"></a>\n<h2 id=\"何为BFC\">何为BFC</h2><p>BFC（Block formatting contexts）,是W3C CSS 2.1中的一个概念，决定了元素如何对其内容进行定位，以及与其他元素的关系和相互作用。在创建了BFC的元素中，子元素会一个接一个的被放置。垂直方向上，他们的起点是一个包含块的顶部，两个相邻元素之间的垂直距离取决于<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#10;##&#35302;&#21457;BFC&#10;&#28385;&#36275;&#20197;&#19979;&#20219;&#24847;&#19968;&#20010;&#24773;&#20917;&#23601;&#20250;&#35302;&#21457;BFC&#65306;&#10;* &#26681;&#33410;&#28857;&#10;* &#28014;&#21160;&#65288;```float```&#19981;&#20026;```none```&#65289;&#10;* &#32477;&#23545;&#23450;&#20301;&#20803;&#32032;&#65288;```position```&#20026;```absolute```&#25110;```fixed```&#65289;&#10;* ```display: inline-block```&#30340;&#20803;&#32032;&#10;* ```display: table-cell```&#30340;&#20803;&#32032;&#65288;HTML&#30340;table&#26684;&#23376;&#40664;&#35748;&#23601;&#26159;&#36825;&#20010;&#65289;&#10;* ```display: table-caption```&#30340;&#20803;&#32032;(HTML&#30340;table caption&#40664;&#35748;&#23601;&#26159;&#36825;&#20010;)&#10;* ```overflow```&#19981;&#20026;```visible```&#30340;&#20803;&#32032;&#10;* &#20280;&#32553;&#30418;&#20803;&#32032;&#65288;```display```&#20026;```flex```&#25110;```inline-flex```&#65289;&#10;&#10;##BFC&#30340;&#20316;&#29992;&#10;BFC&#30340;&#20027;&#35201;&#30693;&#35782;&#28857;&#22312;&#28165;&#38500;&#28014;&#21160;&#37325;&#21472;&#19982;margin&#37325;&#21472;&#19978;&#65292;margin&#37325;&#21472;&#26377;&#22914;&#19979;&#35268;&#21017;&#65306;&#10;* &#20004;&#20010;&#30456;&#37051;&#30340;&#22806;&#36793;&#36317;&#37117;&#26159;&#27491;&#25968;&#26102;&#65292;&#25240;&#21472;&#32467;&#26524;&#26159;&#23427;&#20204;&#20004;&#32773;&#20043;&#38388;&#36739;&#22823;&#30340;&#20540;&#10;* &#20004;&#20010;&#30456;&#37051;&#30340;&#22806;&#36793;&#36317;&#37117;&#26159;&#36127;&#25968;&#26102;&#65292;&#25240;&#21472;&#32467;&#26524;&#26159;&#20004;&#32773;&#32477;&#23545;&#20540;&#30340;&#36739;&#22823;&#20540;&#10;* &#20004;&#20010;&#22806;&#36793;&#36317;&#19968;&#27491;&#19968;&#36127;&#26102;&#65292;&#25240;&#21472;&#32467;&#26524;&#26159;&#20004;&#32773;&#30340;&#30456;&#21152;&#30340;&#21644;&#10;&#10;###BFC&#28165;&#38500;&#23884;&#22871;&#20803;&#32032;&#30340;margin&#37325;&#21472;&#10;&#22914;&#26524;&#29238;&#20803;&#32032;&#19981;&#35302;&#21457;BFC&#65292;&#10;```html&#10;&#60;div class=&#34;outer&#34;&#62;&#10;&#9;&#60;div class=&#34;inner&#34;&#62;&#60;/div&#62;&#10;&#60;/div&#62;</span><br></pre></td></tr></table></figure></p>\n<p>CSS代码如下：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\">.outer</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> <span class=\"hexcolor\">#f0f0f0</span></span></span>;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100%</span></span></span>;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">margin-top</span>:<span class=\"value\"> <span class=\"number\">50px</span></span></span>;</span><br><span class=\"line\">&#125;</span></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.inner</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">margin-top</span>:<span class=\"value\"> <span class=\"number\">50px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> blue</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>效果图：</p>\n<p><img src=\"/img/BFC/1.png\" alt=\"不触发BFC时垂直margin重叠\"></p>\n<p>可以看到，子元素inner和父元素outer的<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#10;&#22312;outer&#19978;&#35302;&#21457;BFC&#65292;&#20462;&#25913;CSS&#65306;&#10;```css&#10;.outer &#123;&#10;&#9;background-color: #f0f0f0;&#10;&#9;width: 100%;&#10;&#9;margin-top: 50px;&#10;&#9;overflow: hidden;&#10;&#125;&#10;&#9;.outer .inner &#123;&#10;&#9;&#9;width: 100px;&#10;&#9;&#9;height: 100px;&#10;&#9;&#9;margin-top: 50px;&#10;&#9;&#9;background-color: blue;&#10;&#9;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>效果图：<br><img src=\"/img/BFC/2.png\" alt=\"触发BFC后垂直margin不重叠\"></p>\n<p>在触发了父元素的BFC，于是乎margin不再重叠</p>\n<h3 id=\"不与浮动元素重叠\">不与浮动元素重叠</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"outer\"</span>&gt;</span></span><br><span class=\"line\">2<span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"left\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">2<span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"top\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\">.outer</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> <span class=\"hexcolor\">#f0f0f0</span></span></span>;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100%</span></span></span>;</span><br><span class=\"line\">&#125;</span></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.left</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">200px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> blue</span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">float</span>:<span class=\"value\"> left</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.top</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">200px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> red</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br></pre></td></tr></table></figure>\n<p>效果图：</p>\n<p><img src=\"/img/BFC/3.png\" alt=\"两个矩形重叠\"></p>\n<p><img src=\"/img/BFC/4.png\" alt=\"检索left元素\"></p>\n<p><img src=\"/img/BFC/5.png\" alt=\"检索top元素\"></p>\n<p>可以从上面三张图看到，两个长方形被重叠了</p>\n<p>在非浮动元素（top）上触发BFC，修改CSS:<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\">.outer</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> <span class=\"hexcolor\">#f0f0f0</span></span></span>;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100%</span></span></span>;</span><br><span class=\"line\">&#125;</span></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.left</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">200px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> blue</span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">float</span>:<span class=\"value\"> left</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.top</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">200px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> red</span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">overflow</span>:<span class=\"value\">hidden</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>效果图：</p>\n<p><img src=\"/img/BFC/6.png\" alt=\"浮动元素与非浮动元素不再重叠\"></p>\n<p>两个矩形不再重叠，不过需要注意在非浮动元素上触发BFC</p>\n<h3 id=\"清除元素内部浮动\">清除元素内部浮动</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"outer\"</span>&gt;</span></span><br><span class=\"line\">2<span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"left\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">2<span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"right\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\">.outer</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> <span class=\"hexcolor\">#f0f0f0</span></span></span>;</span><br><span class=\"line\">2<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100%</span></span></span>;</span><br><span class=\"line\">&#125;</span></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.left</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> blue</span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">float</span>:<span class=\"value\"> left</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">2<span class=\"class\">.outer</span> <span class=\"class\">.right</span> <span class=\"rules\">&#123;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">width</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">height</span>:<span class=\"value\"> <span class=\"number\">100px</span></span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">background-color</span>:<span class=\"value\"> red</span></span>;</span><br><span class=\"line\">22<span class=\"rule\"><span class=\"attribute\">float</span>:<span class=\"value\"> right</span></span>;</span><br><span class=\"line\">2&#125;</span></span><br></pre></td></tr></table></figure>\n<p>效果图：</p>\n<p><img src=\"/img/BFC/7.png\" alt=\"outer没有被浮动元素撑开\"></p>\n<p>可以看到，outer并没有被撑开，查看元素发现其高度为0px</p>\n<p>修改css在outer上触发BFC：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.outer &#123;&#10;&#9;background-color: #f0f0f0;&#10;&#9;width: 100%;&#10;&#9;overflow: hidden;&#10;&#125;&#10;&#9;.outer .left &#123;&#10;&#9;&#9;width: 100px;&#10;&#9;&#9;height: 100px;&#10;&#9;&#9;background-color: blue;&#10;&#9;&#9;float: left;&#10;&#9;&#125;&#10;&#10;&#9;.outer .right &#123;&#10;&#9;&#9;width: 100px;&#10;&#9;&#9;height: 100px;&#10;&#9;&#9;background-color: red;&#10;&#9;&#9;float: right;&#10;&#9;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>效果图：</p>\n<p><img src=\"/img/BFC/8.png\" alt=\"触发BFC后outer被浮动元素撑开\"></p>\n<p>在outer上触发BFC后可以看到，outer的高度变成了100px，被left和right两个浮动元素撑开了</p>\n<h2 id=\"参考文献\">参考文献</h2><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context\" target=\"_blank\" rel=\"external\">Block formatting context</a></p>\n"}